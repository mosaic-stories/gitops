global:
  imageTag: 0921db6
  environment: prod
web:
  replicaCount: 2
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
coreApi:
  replicaCount: 3
  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 20
  # Full environment configuration for production
  # NOTE: Helm does not deep-merge arrays, so we must include the complete env array here
  env:
    - name: PORT
      value: "8080"
    - name: ENVIRONMENT
      value: "production"
    - name: LOG_LEVEL
      value: "info"
    - name: AWS_REGION
      value: "us-east-1"
    # Google OAuth Configuration
    - name: GOOGLE_CLIENT_ID
      valueFrom:
        secretKeyRef:
          name: google-oauth
          key: client-id
    - name: GOOGLE_CLIENT_SECRET
      valueFrom:
        secretKeyRef:
          name: google-oauth
          key: client-secret
    # Application URLs
    - name: APP_URL
      value: "https://mosaiclife.me"
    - name: API_URL
      value: "https://api.mosaiclife.me"
    # SES Email Configuration
    - name: SES_FROM_EMAIL
      value: "noreply@mosaiclife.me"
    - name: SES_REGION
      value: "us-east-1"
    # Session Configuration
    - name: SESSION_SECRET_KEY
      valueFrom:
        secretKeyRef:
          name: session-secret
          key: secret-key
    - name: SESSION_COOKIE_DOMAIN
      value: ".mosaiclife.me"
    # AWS S3 Configuration
    - name: STORAGE_BACKEND
      value: "s3"
    - name: S3_MEDIA_BUCKET
      value: "mosaic-prod-media-033691785857"
    - name: S3_BACKUP_BUCKET
      value: "mosaic-prod-backups-033691785857"
    # Database URL from External Secrets
    - name: DB_URL
      valueFrom:
        secretKeyRef:
          name: database-credentials
          key: DB_URL
externalSecrets:
  session:
    secretKey: "mosaic/prod/session/secret-key"
